(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5677],{3097:(e,a,r)=>{"use strict";r.d(a,{L:()=>c});var n=r(35639),i=r(98377),s=r(64533),t=r(28330);function c(){let e=(0,n.jE)(),{data:a,isLoading:r,error:c}=(0,i.I)({queryKey:["productFamilies"],queryFn:async()=>{try{let e=await (0,t.v$)(t.Sn.catalog.productFamilies);if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.message||"Failed to fetch product families")}return e.json()}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}}}),l=(0,s.n)({mutationFn:async e=>{try{let a=await (0,t.v$)(t.Sn.catalog.productFamilies,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to create product family")}return a.json()}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["productFamilies"]})}}),o=(0,s.n)({mutationFn:async e=>{if(!e.id)throw Error("ID is required for update");try{let a=await (0,t.v$)("".concat(t.Sn.catalog.productFamilies,"/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,id:void 0,version:void 0})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to update product family")}return a.json()}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["productFamilies"]})}}),d=(0,s.n)({mutationFn:async e=>{try{let a=await (0,t.v$)("".concat(t.Sn.catalog.productFamilies,"/").concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to delete product family")}}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["productFamilies"]})}});return{families:(null==a?void 0:a.content)||[],isLoading:r,error:c,createFamily:l.mutate,isCreating:l.isPending,createError:l.error,updateFamily:o.mutate,isUpdating:o.isPending,updateError:o.error,deleteFamily:d.mutate,isDeleting:d.isPending,deleteError:d.error}}},20758:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>O});var n=r(66384),i=r(16636),s=r(55212),t=r(92944),c=r(28016),l=r(46276),o=r(95788),d=r(52142),u=r(22074),h=r(57083),g=r(31238),m=r(42622),p=r(76758),j=r(84431),x=r(19934),y=r(1669),v=r(35639),f=r(98377),w=r(64533),C=r(28330),N=r(3097),b=r(78342),E=r(50239),S=r(64386),F=r(42713);let I=["PIECE","BOX","CASE","BOTTLE","TUBE","PACK","GRAM","KILOGRAM","LITER","MILLILITER","METER","CENTIMETER","INCH","POUND","OUNCE"],A=["DRAFT","ACTIVE","DISCONTINUED","SEASONAL","RECALL","PENDING_APPROVAL"];function O(){(0,v.jE)();let{variants:e=[],isLoading:a,error:r,createVariant:O,isCreating:P,createError:k,updateVariant:q,isUpdating:T,updateError:L,deleteVariant:V,isDeleting:$,deleteError:J}=function(){let e=(0,v.jE)(),{data:a,isLoading:r,error:n}=(0,f.I)({queryKey:["variants"],queryFn:async()=>{try{let e=await (0,C.v$)(C.Sn.catalog.variants);if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.message||"Failed to fetch variants")}return e.json()}catch(e){throw e instanceof C.Ny&&window.location.replace("/auth/login"),e}}}),i=(0,w.n)({mutationFn:async e=>{try{let a=await (0,C.v$)(C.Sn.catalog.variants,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to create variant")}return a.json()}catch(e){throw e instanceof C.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["variants"]})}}),s=(0,w.n)({mutationFn:async e=>{if(!e.id)throw Error("ID is required for update");try{let a=await (0,C.v$)("".concat(C.Sn.catalog.variants,"/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to update variant")}return a.json()}catch(e){throw e instanceof C.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["variants"]})}}),t=(0,w.n)({mutationFn:async e=>{try{let a=await (0,C.v$)("".concat(C.Sn.catalog.variants,"/").concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to delete variant")}}catch(e){throw e instanceof C.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["variants"]})}});return{variants:(null==a?void 0:a.content)||[],isLoading:r,error:n,createVariant:i.mutate,isCreating:i.isPending,createError:i.error,updateVariant:s.mutate,isUpdating:s.isPending,updateError:s.error,deleteVariant:t.mutate,isDeleting:t.isPending,deleteError:t.error}}(),{families:M=[],isLoading:K,error:U,createFamily:D,isCreating:B}=(0,N.L)(),{insurances:R=[],isLoading:z,error:Q}=(0,E.Z)(),{categories:G=[],isLoading:Z,error:_,createCategory:H}=(0,S.C)(),[W,X]=(0,i.useState)(""),[Y,ee]=(0,i.useState)(!1),[ea,er]=(0,i.useState)(null),[en,ei]=(0,i.useState)({familyId:"",name:"",sku:"",brand:"",unitOfMeasure:"PIECE",countryOfOrigin:"",color:"",specifications:{},insuranceCoverages:[],status:"ACTIVE"}),[es,et]=(0,i.useState)(""),[ec,el]=(0,i.useState)(!1),[eo,ed]=(0,i.useState)({name:"",description:"",categoryId:"",brand:"",insuranceCoverages:[]}),[eu,eh]=(0,i.useState)(!1),[eg,em]=(0,i.useState)({name:"",parentId:null,description:""}),ep=e.filter(e=>e.name.toLowerCase().includes(W.toLowerCase())||e.sku.toLowerCase().includes(W.toLowerCase())||e.brand.toLowerCase().includes(W.toLowerCase())),ej=async e=>{if(e.preventDefault(),!en.familyId)return void b.o.error("Product family is required");if(!en.name)return void b.o.error("Variant name is required");if(!en.sku)return void b.o.error("SKU is required");if(!en.brand)return void b.o.error("Brand is required");if(!en.unitOfMeasure)return void b.o.error("Unit of measure is required");try{let e={...en,insuranceCoverages:en.insuranceCoverages,status:en.status};ea?(await q({...e,id:ea.id,version:ea.version}),b.o.success("Variant updated successfully")):(await O(e),b.o.success("Variant created successfully")),ee(!1),er(null),ei({familyId:"",name:"",sku:"",brand:"",unitOfMeasure:"PIECE",countryOfOrigin:"",color:"",specifications:{},insuranceCoverages:[],status:"ACTIVE"})}catch(e){b.o.error(e instanceof Error?e.message:"An error occurred")}},ex=e=>{er(e),ei({familyId:e.family.id,name:e.name,sku:e.sku,brand:e.brand,unitOfMeasure:e.unitOfMeasure,countryOfOrigin:e.countryOfOrigin||"",color:e.color||"",specifications:e.specifications||{},insuranceCoverages:(e.insuranceCoverages||[]).map(e=>({insuranceId:e.insuranceId,clientContributionPercentage:e.clientContributionPercentage,insurancePrice:e.insurancePrice,requiresPreApproval:e.requiresPreApproval})),status:e.status||"ACTIVE"}),ee(!0)},ey=async e=>{try{await V(e),b.o.success("Variant deleted successfully")}catch(e){b.o.error(e instanceof Error?e.message:"Failed to delete variant")}},ev=e=>{ei(a=>({...a,insuranceCoverages:a.insuranceCoverages.filter(a=>a.insuranceId!==e)}))},ef=(e,a)=>{ei(r=>({...r,insuranceCoverages:r.insuranceCoverages.map(r=>r.insuranceId===e?{...r,...a}:r)}))},ew=async e=>{if(e.preventDefault(),!eo.name||!eo.categoryId)return void b.o.error("Family name and category are required.");try{let e=await new Promise((e,a)=>{D({...eo},{onSuccess:a=>e(a),onError:e=>a(e)})});b.o.success("Product family created successfully"),el(!1),ed({name:"",description:"",categoryId:"",brand:"",insuranceCoverages:[]}),e&&e.id&&ei(a=>({...a,familyId:e.id}))}catch(e){b.o.error(e instanceof Error?e.message:"Failed to create product family")}},eC=async e=>{if(e.preventDefault(),!eg.name)return void b.o.error("Category name is required.");let a=eg.name.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,20).replace(/-+$/,"");a.length<3&&(a="".concat(a,"-").concat(Math.floor(1e3+9e3*Math.random()))),a=a.toUpperCase();let r={name:eg.name,code:a,parentId:eg.parentId,description:eg.description,displayOrder:1,isActive:!0,icon:null,taxCategory:"Standard",regulatoryCategory:null,localizedNames:{},metadata:{}};try{let e=await H.mutateAsync(r);b.o.success("Category created successfully"),eh(!1),em({name:"",parentId:null,description:""}),ed(a=>({...a,categoryId:e.id}))}catch(e){b.o.error(e instanceof Error?e.message:"Failed to create category")}};if(a||K||z||Z)return(0,n.jsx)("div",{children:"Loading..."});if(r||U||Q||_){var eN;return(0,n.jsxs)("div",{children:["Error: ",(r||U||Q||_)instanceof Error?null==(eN=r||U||Q||_)?void 0:eN.message:"An error occurred"]})}return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Product Variants"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage product variants and their specifications"})]}),(0,n.jsxs)(l.lG,{open:Y,onOpenChange:ee,children:[(0,n.jsx)(l.zM,{asChild:!0,children:(0,n.jsxs)(s.$,{onClick:()=>ee(!0),children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Add Variant"]})}),(0,n.jsx)(l.Cf,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:(0,n.jsxs)("form",{onSubmit:ej,children:[(0,n.jsxs)(l.c7,{children:[(0,n.jsx)(l.L3,{children:ea?"Edit Variant":"Add New Variant"}),(0,n.jsx)(l.rr,{children:ea?"Update the variant information below.":"Create a new product variant."})]}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"family",children:"Product Family *"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(o.l6,{value:en.familyId,onValueChange:e=>ei(a=>({...a,familyId:e})),required:!0,disabled:!!ea,children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{placeholder:"Select product family"})}),(0,n.jsx)(o.gC,{children:M.map(e=>(0,n.jsx)(o.eb,{value:e.id,children:e.name},e.id))})]}),(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>el(!0),children:(0,n.jsx)(u.A,{className:"h-4 w-4"})})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"name",children:"Variant Name *"}),(0,n.jsx)(t.p,{id:"name",value:en.name,onChange:e=>ei(a=>({...a,name:e.target.value})),placeholder:"e.g., Galaxy S23 Ultra 256GB",required:!0})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"sku",children:"SKU *"}),(0,n.jsx)(t.p,{id:"sku",value:en.sku,onChange:e=>ei(a=>({...a,sku:e.target.value})),placeholder:"e.g., GS23U-256-BLK",required:!0})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"brand",children:"Brand *"}),(0,n.jsx)(t.p,{id:"brand",value:en.brand,onChange:e=>ei(a=>({...a,brand:e.target.value})),placeholder:"Brand name",required:!0})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"unitOfMeasure",children:"Unit of Measure *"}),(0,n.jsxs)(o.l6,{value:en.unitOfMeasure,onValueChange:e=>ei(a=>({...a,unitOfMeasure:e})),required:!0,children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{placeholder:"Select unit of measure"})}),(0,n.jsx)(o.gC,{children:I.map(e=>(0,n.jsx)(o.eb,{value:e,children:e},e))})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"countryOfOrigin",children:"Country of Origin"}),(0,n.jsx)(t.p,{id:"countryOfOrigin",value:en.countryOfOrigin,onChange:e=>ei(a=>({...a,countryOfOrigin:e.target.value})),placeholder:"Country of origin"})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"color",children:"Color"}),(0,n.jsx)(t.p,{id:"color",value:en.color,onChange:e=>ei(a=>({...a,color:e.target.value})),placeholder:"Product color"})]})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{children:"Specifications"}),(0,n.jsxs)("div",{className:"space-y-2",children:[Object.entries(en.specifications||{}).map((e,a)=>{let[r,i]=e;return(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(t.p,{placeholder:"Specification name",value:r,onChange:e=>{let a={...en.specifications};delete a[r],a[e.target.value]=i,ei(e=>({...e,specifications:a}))}}),(0,n.jsx)(t.p,{placeholder:"Value",value:i,onChange:e=>ei(a=>({...a,specifications:{...a.specifications,[r]:e.target.value}}))}),(0,n.jsx)(s.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e={...en.specifications};delete e[r],ei(a=>({...a,specifications:e}))},children:"\xd7"})]},a)}),(0,n.jsx)(s.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ei(e=>({...e,specifications:{...e.specifications,"":""}})),children:"Add Specification"})]})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{children:"Insurance Coverage"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(o.l6,{value:es,onValueChange:et,children:[(0,n.jsx)(o.bq,{className:"flex-1",children:(0,n.jsx)(o.yv,{placeholder:"Select insurance"})}),(0,n.jsx)(o.gC,{children:R.filter(e=>!en.insuranceCoverages.some(a=>a.insuranceId===e.id)).map(e=>(0,n.jsxs)(o.eb,{value:e.id,children:[e.name," (",e.abbreviation,")"]},e.id))})]}),(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>{if(!es)return;let e=R.find(e=>e.id===es);e&&(ei(a=>({...a,insuranceCoverages:[...a.insuranceCoverages,{insuranceId:e.id,clientContributionPercentage:"number"==typeof e.defaultClientContributionPercentage?e.defaultClientContributionPercentage:10}]})),et(""))},disabled:!es,children:"Add Insurance"})]}),en.insuranceCoverages.map(e=>{let a=R.find(a=>a.id===e.insuranceId);return a?(0,n.jsxs)(x.Zp,{children:[(0,n.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsxs)(x.ZB,{className:"text-sm font-medium",children:[a.name," (",a.abbreviation,")"]}),(0,n.jsx)(s.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>ev(e.insuranceId),children:(0,n.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,n.jsx)(x.Wu,{children:(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{children:"Status"}),(0,n.jsxs)(o.l6,{value:e.clientContributionPercentage.toString(),onValueChange:a=>ef(e.insuranceId,{clientContributionPercentage:parseFloat(a)}),children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{})}),(0,n.jsxs)(o.gC,{children:[(0,n.jsx)(o.eb,{value:"ACTIVE",children:"Active"}),(0,n.jsx)(o.eb,{value:"INACTIVE",children:"Inactive"}),(0,n.jsx)(o.eb,{value:"PENDING",children:"Pending"})]})]})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{children:"Insurance Price"}),(0,n.jsx)(t.p,{type:"number",value:e.insurancePrice||"",onChange:a=>ef(e.insuranceId,{insurancePrice:parseFloat(a.target.value)}),placeholder:"Enter insurance price"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{children:"Client Contribution %"}),(0,n.jsx)(t.p,{type:"number",value:e.clientContributionPercentage,onChange:a=>{let r=parseFloat(a.target.value);ef(e.insuranceId,{clientContributionPercentage:r})},min:"0",max:"100"})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{children:"Requires Pre-Approval"}),(0,n.jsxs)(o.l6,{value:e.requiresPreApproval?"true":"false",onValueChange:a=>ef(e.insuranceId,{requiresPreApproval:"true"===a}),children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{placeholder:"Select"})}),(0,n.jsxs)(o.gC,{children:[(0,n.jsx)(o.eb,{value:"true",children:"Yes"}),(0,n.jsx)(o.eb,{value:"false",children:"No"})]})]})]})]})]})})]},e.insuranceId):null})]})]})]}),(0,n.jsx)(l.Es,{children:(0,n.jsx)(s.$,{type:"submit",disabled:P||T,children:ea?"Update":"Create"})})]})})]})]}),(0,n.jsxs)(x.Zp,{children:[(0,n.jsxs)(x.aR,{children:[(0,n.jsx)(x.ZB,{children:"Search & Filter"}),(0,n.jsx)(x.BT,{children:"Find variants by name, SKU, or brand"})]}),(0,n.jsx)(x.Wu,{children:(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)("div",{className:"flex-1 relative",children:[(0,n.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(t.p,{placeholder:"Search variants...",value:W,onChange:e=>X(e.target.value),className:"pl-10"})]}),(0,n.jsx)("div",{className:"w-40",children:(0,n.jsxs)(o.l6,{value:"all",onValueChange:()=>{},children:[(0,n.jsxs)(o.bq,{children:[(0,n.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,n.jsx)(o.yv,{})]}),(0,n.jsxs)(o.gC,{children:[(0,n.jsx)(o.eb,{value:"all",children:"All Status"}),A.map(e=>(0,n.jsx)(o.eb,{value:e,children:e},e))]})]})})]})})]}),(0,n.jsxs)(x.Zp,{children:[(0,n.jsxs)(x.aR,{children:[(0,n.jsxs)(x.ZB,{children:["Product Variants (",ep.length,")"]}),(0,n.jsx)(x.BT,{children:"All product variants in the system"})]}),(0,n.jsx)(x.Wu,{children:(0,n.jsxs)(c.XI,{children:[(0,n.jsx)(c.A0,{children:(0,n.jsxs)(c.Hj,{children:[(0,n.jsx)(c.nd,{children:"Variant"}),(0,n.jsx)(c.nd,{children:"Family"}),(0,n.jsx)(c.nd,{children:"SKU"}),(0,n.jsx)(c.nd,{children:"Brand"}),(0,n.jsx)(c.nd,{children:"Status"}),(0,n.jsx)(c.nd,{children:"Unit"}),(0,n.jsx)(c.nd,{children:"Details"}),(0,n.jsx)(c.nd,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(c.BF,{children:ep.map(e=>(0,n.jsxs)(c.Hj,{children:[(0,n.jsx)(c.nA,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:e.sku})]})}),(0,n.jsx)(c.nA,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.family.name}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:e.family.category.name}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.family.brand})]})}),(0,n.jsx)(c.nA,{children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(p.A,{className:"h-3 w-3"}),e.sku]})}),(0,n.jsx)(c.nA,{children:e.brand}),(0,n.jsx)(c.nA,{children:(0,n.jsx)(y.E,{variant:"ACTIVE"===e.status?"default":"secondary",children:e.status})}),(0,n.jsx)(c.nA,{children:(0,n.jsx)(y.E,{variant:"outline",children:e.unitOfMeasure})}),(0,n.jsx)(c.nA,{children:(0,n.jsxs)("div",{className:"space-y-1",children:[e.countryOfOrigin&&(0,n.jsxs)("div",{className:"text-sm",children:["Origin: ",e.countryOfOrigin]}),e.color&&(0,n.jsxs)("div",{className:"text-sm",children:["Color: ",e.color]}),e.specifications&&Object.entries(e.specifications).length>0&&(0,n.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:Object.entries(e.specifications).map(e=>{let[a,r]=e;return(0,n.jsxs)(y.E,{variant:"outline",className:"text-xs",children:[a,": ",r]},a)})})]})}),(0,n.jsx)(c.nA,{className:"text-right",children:(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(s.$,{variant:"ghost",size:"icon",onClick:()=>ex(e),children:(0,n.jsx)(j.A,{className:"h-4 w-4"})}),(0,n.jsx)(s.$,{variant:"ghost",size:"icon",onClick:()=>ey(e.id),children:(0,n.jsx)(h.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,n.jsx)(l.lG,{open:ec,onOpenChange:el,children:(0,n.jsx)(l.Cf,{className:"sm:max-w-[600px]",children:(0,n.jsxs)("form",{onSubmit:ew,children:[(0,n.jsxs)(l.c7,{children:[(0,n.jsx)(l.L3,{children:"Add New Product Family"}),(0,n.jsx)(l.rr,{children:"Create a new product family. This will be available for variants."})]}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"new-family-name",children:"Family Name *"}),(0,n.jsx)(t.p,{id:"new-family-name",value:eo.name,onChange:e=>ed(a=>({...a,name:e.target.value})),placeholder:"e.g., Premium Moisturizers",required:!0})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"new-family-category",children:"Category *"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(o.l6,{value:eo.categoryId,onValueChange:e=>ed(a=>({...a,categoryId:e})),required:!0,children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{placeholder:"Select category"})}),(0,n.jsx)(o.gC,{children:G.map(e=>(0,n.jsx)(o.eb,{value:e.id,children:e.name},e.id))})]}),(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>eh(!0),children:(0,n.jsx)(u.A,{className:"h-4 w-4"})})]})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"new-family-brand",children:"Brand"}),(0,n.jsx)(t.p,{id:"new-family-brand",value:eo.brand,onChange:e=>ed(a=>({...a,brand:e.target.value})),placeholder:"Brand name"})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"new-family-desc",children:"Description"}),(0,n.jsx)(F.T,{id:"new-family-desc",value:eo.description,onChange:e=>ed(a=>({...a,description:e.target.value})),placeholder:"Family description"})]})]}),(0,n.jsx)(l.Es,{children:(0,n.jsx)(s.$,{type:"submit",disabled:B,children:B?"Creating...":"Create Family"})})]})})}),(0,n.jsx)(l.lG,{open:eu,onOpenChange:eh,children:(0,n.jsx)(l.Cf,{className:"sm:max-w-[600px]",children:(0,n.jsxs)("form",{onSubmit:eC,children:[(0,n.jsxs)(l.c7,{children:[(0,n.jsx)(l.L3,{children:"Add New Category"}),(0,n.jsx)(l.rr,{children:"Create a new product category. This will be available for product families."})]}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"new-category-name",children:"Category Name *"}),(0,n.jsx)(t.p,{id:"new-category-name",value:eg.name,onChange:e=>em(a=>({...a,name:e.target.value})),placeholder:"e.g., Skincare",required:!0})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"new-category-parent",children:"Parent Category"}),(0,n.jsxs)(o.l6,{value:eg.parentId||"no-parent",onValueChange:e=>em(a=>({...a,parentId:"no-parent"===e?null:e})),children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{placeholder:"Select parent category"})}),(0,n.jsxs)(o.gC,{children:[(0,n.jsx)(o.eb,{value:"no-parent",children:"No Parent (Root Category)"}),G.map(e=>(0,n.jsx)(o.eb,{value:e.id,children:e.name},e.id))]})]})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"new-category-desc",children:"Description"}),(0,n.jsx)(F.T,{id:"new-category-desc",value:eg.description,onChange:e=>em(a=>({...a,description:e.target.value})),placeholder:"Category description"})]})]}),(0,n.jsx)(l.Es,{children:(0,n.jsx)(s.$,{type:"submit",disabled:H.isPending,children:H.isPending?"Creating...":"Create Category"})})]})})})]})}},21211:(e,a,r)=>{Promise.resolve().then(r.bind(r,20758))},42622:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});let n=(0,r(25787).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},42713:(e,a,r)=>{"use strict";r.d(a,{T:()=>t});var n=r(66384),i=r(16636),s=r(35515);let t=i.forwardRef((e,a)=>{let{className:r,...i}=e;return(0,n.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...i})});t.displayName="Textarea"},50239:(e,a,r)=>{"use strict";r.d(a,{Z:()=>u});var n=r(35639),i=r(98377),s=r(64533),t=r(28330);async function c(){try{let e=await (0,t.v$)(t.Sn.inventory.insurances);if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.message||"Failed to fetch insurances")}return e.json()}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}}async function l(e){try{let a=await (0,t.v$)(t.Sn.inventory.insurances,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to create insurance")}return a.json()}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}}async function o(e){try{let a=await (0,t.v$)(t.Sn.inventory.insurance(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to update insurance")}return a.json()}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}}async function d(e){try{let a=await (0,t.v$)(t.Sn.inventory.insurance(e),{method:"DELETE"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to delete insurance")}}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}}function u(){let e=(0,n.jE)(),{data:a=[],isLoading:r,error:t}=(0,i.I)({queryKey:["insurances"],queryFn:c}),{mutateAsync:u,isPending:h,error:g}=(0,s.n)({mutationFn:l,onSuccess:()=>{e.invalidateQueries({queryKey:["insurances"]})}}),{mutateAsync:m,isPending:p,error:j}=(0,s.n)({mutationFn:o,onSuccess:()=>{e.invalidateQueries({queryKey:["insurances"]})}}),{mutateAsync:x,isPending:y,error:v}=(0,s.n)({mutationFn:d,onSuccess:()=>{e.invalidateQueries({queryKey:["insurances"]})}});return{insurances:a,isLoading:r,error:t,createInsurance:u,isCreating:h,createError:g,updateInsurance:m,isUpdating:p,updateError:j,deleteInsurance:x,isDeleting:y,deleteError:v}}},64386:(e,a,r)=>{"use strict";r.d(a,{C:()=>c});var n=r(35639),i=r(98377),s=r(64533),t=r(28330);function c(){let e=(0,n.jE)(),{data:a=[],isLoading:r,error:c}=(0,i.I)({queryKey:["categories"],queryFn:async()=>{try{let e=await (0,t.v$)(t.Sn.catalog.categories);if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.message||"Failed to fetch categories")}return e.json()}catch(e){throw e instanceof t.Ny&&window.location.replace("/auth/login"),e}}}),l=(0,s.n)({mutationFn:async e=>{let a=await (0,t.v$)(t.Sn.catalog.categories,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Failed to create category");return a.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}});return{categories:a,isLoading:r,error:c,createCategory:l,updateCategory:(0,s.n)({mutationFn:async e=>{let a=await (0,t.v$)(t.Sn.catalog.category(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Failed to update category");return a.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}}),deleteCategory:(0,s.n)({mutationFn:async e=>{let a=await (0,t.v$)(t.Sn.catalog.category(e),{method:"DELETE"});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Failed to delete category")},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}}},76758:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});let n=(0,r(25787).A)("barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]])},84431:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});let n=(0,r(25787).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[9414,2261,5716,8377,7026,9297,9037,6338,6565,9309,951,7358],()=>a(21211)),_N_E=e.O()}]);