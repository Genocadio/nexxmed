(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7187],{43441:(e,a,n)=>{"use strict";n.d(a,{A:()=>r});let r=(0,n(25787).A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},52001:(e,a,n)=>{Promise.resolve().then(n.bind(n,68169))},68169:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>J});var r=n(66384),s=n(16636),i=n(55212),c=n(92944),l=n(28016),t=n(46276),d=n(95788),o=n(52142),h=n(22074),u=n(57083),m=n(31238),x=n(42622),g=n(43441),j=n(84431),v=n(91752),p=n(19934),N=n(1669),f=n(35639),b=n(98377),C=n(64533),y=n(28330),w=n(33712),I=n(50239),A=n(78342),S=n(51797),P=n(36912),k=n(55730),q=n(42713);let F=["USA","India","Germany","UK","France","Canada","Japan","Switzerland","Italy","Netherlands","Belgium","Australia","South Korea","China","Brazil"],B=["Tablet","Capsule","Injection","Syrup","Cream","Ointment","Drops","Inhaler","Patch"],E=["Oral","IV/IM","Topical","Inhalation","Sublingual","Rectal","Ophthalmic","Otic"];function J(){let{brands:e,isLoading:a,error:n,createBrand:J,updateBrand:V,deleteBrand:M,isCreating:$,isUpdating:D,isDeleting:T}=function(){let e=(0,f.jE)(),{data:a=[],isLoading:n,error:r}=(0,b.I)({queryKey:["brands"],queryFn:async()=>{try{let e=await (0,y.v$)(y.Sn.medicine.brands);if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.message||"Failed to fetch brands")}return e.json()}catch(e){throw e instanceof y.Ny&&window.location.replace("/auth/login"),e}}}),s=(0,C.n)({mutationFn:async e=>{try{let a=await (0,y.v$)(y.Sn.medicine.brands,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to create brand")}return a.json()}catch(e){throw e instanceof y.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]})}}),i=(0,C.n)({mutationFn:async e=>{let{id:a,...n}=e;try{let e=await (0,y.v$)("".concat(y.Sn.medicine.brands,"/").concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.message||"Failed to update brand")}return e.json()}catch(e){throw e instanceof y.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]})}}),c=(0,C.n)({mutationFn:async e=>{try{let a=await (0,y.v$)("".concat(y.Sn.medicine.brands,"/").concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to delete brand")}return a.json()}catch(e){throw e instanceof y.Ny&&window.location.replace("/auth/login"),e}},onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]})}});return{brands:a,isLoading:n,error:r,createBrand:s.mutate,updateBrand:i.mutate,deleteBrand:c.mutate,isCreating:s.isPending,isUpdating:i.isPending,isDeleting:c.isPending}}(),{variants:O,createVariant:L,isCreating:z}=(0,w.m)(),{generics:G,createGeneric:U,isCreating:Z}=(0,P.O)(),{classes:_,createClass:R,isCreating:K}=(0,k.S)(),{insurances:H}=(0,I.Z)(),[Q,W]=(0,s.useState)(""),[X,Y]=(0,s.useState)("all"),[ee,ea]=(0,s.useState)("all"),[en,er]=(0,s.useState)(!1),[es,ei]=(0,s.useState)(null),[ec,el]=(0,s.useState)(""),[et,ed]=(0,s.useState)([]),[eo,eh]=(0,s.useState)(!1),[eu,em]=(0,s.useState)({name:"",tradeName:"",form:"",route:"",strength:"",concentration:"",packaging:"",notes:"",extraInfo:null,genericIds:[]}),[ex,eg]=(0,s.useState)(""),[ej,ev]=(0,s.useState)(!1),[ep,eN]=(0,s.useState)({name:"",chemicalName:"",description:"",classId:""}),[ef,eb]=(0,s.useState)(!1),[eC,ey]=(0,s.useState)({name:"",description:""}),[ew,eI]=(0,s.useState)({brandName:"",manufacturer:"",country:"",variantId:""}),eA=e.filter(e=>{let a=e.brandName.toLowerCase().includes(Q.toLowerCase())||e.manufacturer.toLowerCase().includes(Q.toLowerCase())||e.variantName.toLowerCase().includes(Q.toLowerCase()),n="all"===X||e.country===X,r="all"===ee||e.variantId===ee;return a&&n&&r}),eS=(e,a)=>{ed(n=>n.map(n=>n.insuranceId===e?{...n,coverage:{...n.coverage,...a}}:n))},eP=e=>{ed(a=>a.filter(a=>a.insuranceId!==e))},ek=async e=>{e.preventDefault();try{if(!O.find(e=>e.id===ew.variantId))return void A.o.error("Please select a variant");let e={variantId:ew.variantId,brandName:ew.brandName,manufacturer:ew.manufacturer,country:ew.country,insuranceCoverages:et.map(e=>{var a,n;let r=null==es||null==(a=es.insuranceCoverages)?void 0:a.find(a=>a.id===e.coverage.id),s=r?null:H.find(a=>a.id===e.insuranceId);return{id:e.coverage.id||crypto.randomUUID(),insuranceId:e.insuranceId,insuranceName:(null==r?void 0:r.insuranceName)||(null==s?void 0:s.name)||"Unknown Insurance",status:e.coverage.status,insurancePrice:e.coverage.insurancePrice,clientContributionPercentage:null!=(n=e.coverage.clientContributionPercentage)?n:0,requiresPreApproval:e.coverage.requiresPreApproval,effectiveFrom:e.coverage.createdAt||new Date().toISOString(),createdAt:e.coverage.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:e.coverage.createdBy||"system_admin",updatedBy:"system_admin",version:e.coverage.version||0}})};if(es){let a={...e,id:es.id};await V(a),A.o.success("Brand updated successfully")}else await J(e),A.o.success("Brand created successfully");er(!1),ei(null),eI({brandName:"",manufacturer:"",country:"",variantId:""}),ed([])}catch(e){A.o.error(e instanceof Error?e.message:"An error occurred")}},eq=e=>{var a;ei(e),eI({brandName:e.brandName,manufacturer:e.manufacturer,country:e.country,variantId:e.variantId}),ed((null==(a=e.insuranceCoverages)?void 0:a.map(e=>({insuranceId:e.insuranceId,coverage:{id:e.id,status:e.status,insurancePrice:e.insurancePrice,clientContributionPercentage:e.clientContributionPercentage,requiresPreApproval:e.requiresPreApproval,createdAt:e.createdAt,updatedAt:e.updatedAt,createdBy:e.createdBy,updatedBy:e.updatedBy,version:e.version,insuranceName:e.insuranceName}})))||[]),er(!0)},eF=async e=>{try{await M(e),A.o.success("Brand deleted successfully")}catch(e){A.o.error(e instanceof Error?e.message:"Failed to delete brand")}},eB=e=>{em(a=>({...a,genericIds:a.genericIds.includes(e)?a.genericIds.filter(a=>a!==e):[...a.genericIds,e]}))},eE=G.filter(e=>!eu.genericIds.includes(e.id)&&(e.name.toLowerCase().includes(ex.toLowerCase())||e.className.toLowerCase().includes(ex.toLowerCase())));return n?(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-red-600",children:"Error loading medicine brands"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Please try again later"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Medicine Brands"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage branded medicines and their manufacturers"})]}),(0,r.jsxs)(t.lG,{open:en,onOpenChange:er,children:[(0,r.jsx)(t.zM,{asChild:!0,children:(0,r.jsxs)(i.$,{onClick:()=>{ei(null),eI({brandName:"",manufacturer:"",country:"",variantId:""}),ed([]),er(!0)},children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Add Brand"]})}),(0,r.jsx)(t.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("form",{onSubmit:ek,children:[(0,r.jsxs)(t.c7,{children:[(0,r.jsx)(t.L3,{children:es?"Edit Medicine Brand":"Add New Medicine Brand"}),(0,r.jsx)(t.rr,{children:es?"Update the medicine brand information below.":"Create a new branded medicine entry."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"brandName",children:"Brand Name"}),(0,r.jsx)(c.p,{id:"brandName",value:ew.brandName,onChange:e=>eI({...ew,brandName:e.target.value}),placeholder:"e.g., Decadron",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"variant",children:"Medicine Variant"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(d.l6,{value:ew.variantId,onValueChange:e=>eI({...ew,variantId:e}),required:!0,children:[(0,r.jsx)(d.bq,{className:"flex-1",children:(0,r.jsx)(d.yv,{placeholder:"Select a variant"})}),(0,r.jsx)(d.gC,{children:O.map(e=>(0,r.jsx)(d.eb,{value:e.id,children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.form," - ",e.strength]})]})},e.id))})]}),(0,r.jsx)(i.$,{type:"button",variant:"outline",size:"icon",onClick:()=>eh(!0),children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"manufacturer",children:"Manufacturer"}),(0,r.jsx)(c.p,{id:"manufacturer",value:ew.manufacturer,onChange:e=>eI({...ew,manufacturer:e.target.value}),placeholder:"e.g., Merck & Co.",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"country",children:"Country"}),(0,r.jsxs)(d.l6,{value:ew.country,onValueChange:e=>eI({...ew,country:e}),required:!0,children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{placeholder:"Select country"})}),(0,r.jsx)(d.gC,{children:F.map(e=>(0,r.jsx)(d.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{children:"Insurance Coverage"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(d.l6,{value:ec,onValueChange:el,children:[(0,r.jsx)(d.bq,{className:"flex-1",children:(0,r.jsx)(d.yv,{placeholder:"Select insurance"})}),(0,r.jsx)(d.gC,{children:H.filter(e=>!et.some(a=>a.insuranceId===e.id)).map(e=>(0,r.jsxs)(d.eb,{value:e.id,children:[e.name," (",e.abbreviation,")"]},e.id))})]}),(0,r.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>{if(!ec)return;let e=H.find(e=>e.id===ec);if(!e)return;let a="number"!=typeof e.defaultClientContributionPercentage||isNaN(e.defaultClientContributionPercentage)?null:e.defaultClientContributionPercentage,n="boolean"==typeof e.defaultRequiresPreApproval&&e.defaultRequiresPreApproval;ed(r=>[...r,{insuranceId:e.id,coverage:{id:crypto.randomUUID(),status:"ACTIVE",insurancePrice:null,clientContributionPercentage:a,requiresPreApproval:n}}]),el("")},disabled:!ec,children:"Add Insurance"})]}),et.map(e=>{let a=H.find(a=>a.id===e.insuranceId);return(0,r.jsxs)(p.Zp,{children:[(0,r.jsxs)(p.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsxs)(p.ZB,{className:"text-sm font-medium",children:[e.coverage.insuranceName," ",(null==a?void 0:a.abbreviation)?"(".concat(a.abbreviation,")"):""]}),(0,r.jsx)(i.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>eP(e.insuranceId),children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(p.Wu,{children:(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{children:"Status"}),(0,r.jsxs)(d.l6,{value:e.coverage.status,onValueChange:a=>eS(e.insuranceId,{status:a}),children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"ACTIVE",children:"Active"}),(0,r.jsx)(d.eb,{value:"INACTIVE",children:"Inactive"}),(0,r.jsx)(d.eb,{value:"PENDING",children:"Pending"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{children:"Insurance Price"}),(0,r.jsx)(c.p,{type:"number",value:"number"!=typeof e.coverage.insurancePrice||isNaN(e.coverage.insurancePrice)?"":e.coverage.insurancePrice,onChange:a=>eS(e.insuranceId,{insurancePrice:parseFloat(a.target.value)}),placeholder:"Enter insurance price"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{children:"Client Contribution %"}),(0,r.jsx)(c.p,{type:"number",value:"number"!=typeof e.coverage.clientContributionPercentage||isNaN(e.coverage.clientContributionPercentage)?"":e.coverage.clientContributionPercentage,onChange:a=>{let n=parseFloat(a.target.value);eS(e.insuranceId,{clientContributionPercentage:n})},min:"0",max:"100"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{children:"Requires Pre-Approval"}),(0,r.jsxs)(d.l6,{value:e.coverage.requiresPreApproval?"true":"false",onValueChange:a=>eS(e.insuranceId,{requiresPreApproval:"true"===a}),children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"true",children:"Yes"}),(0,r.jsx)(d.eb,{value:"false",children:"No"})]})]})]})]})]})})]},e.coverage.id)})]})]})]}),(0,r.jsx)(t.Es,{children:(0,r.jsx)(i.$,{type:"submit",disabled:$||D,children:es?"Update":"Create"})})]})})]})]}),(0,r.jsxs)(p.Zp,{children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsx)(p.ZB,{children:"Search & Filter"}),(0,r.jsx)(p.BT,{children:"Find medicine brands by name, manufacturer, or variant"})]}),(0,r.jsx)(p.Wu,{children:(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(c.p,{placeholder:"Search by brand name, manufacturer, or variant...",value:Q,onChange:e=>W(e.target.value),className:"pl-10"})]}),(0,r.jsx)("div",{className:"w-40",children:(0,r.jsxs)(d.l6,{value:X,onValueChange:Y,children:[(0,r.jsxs)(d.bq,{children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)(d.yv,{})]}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"all",children:"All Countries"}),F.map(e=>(0,r.jsx)(d.eb,{value:e,children:e},e))]})]})}),(0,r.jsx)("div",{className:"w-48",children:(0,r.jsxs)(d.l6,{value:ee,onValueChange:ea,children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"all",children:"All Variants"}),O.map(e=>(0,r.jsx)(d.eb,{value:e.id,children:e.name},e.id))]})]})})]})})]}),(0,r.jsxs)(p.Zp,{children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsxs)(p.ZB,{children:["Medicine Brands (",eA.length,")"]}),(0,r.jsx)(p.BT,{children:"All branded medicines in the system"})]}),(0,r.jsx)(p.Wu,{children:(0,r.jsxs)(l.XI,{children:[(0,r.jsx)(l.A0,{children:(0,r.jsxs)(l.Hj,{children:[(0,r.jsx)(l.nd,{children:"Brand Name"}),(0,r.jsx)(l.nd,{children:"Variant"}),(0,r.jsx)(l.nd,{children:"Manufacturer"}),(0,r.jsx)(l.nd,{children:"Country"}),(0,r.jsx)(l.nd,{className:"hidden 2xl:table-cell",children:"Insurance Coverages"}),(0,r.jsx)(l.nd,{children:"Created"}),(0,r.jsx)(l.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(l.BF,{children:eA.map(e=>{var a;return(0,r.jsxs)(l.Hj,{children:[(0,r.jsx)(l.nA,{children:(0,r.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"}),e.brandName]})}),(0,r.jsx)(l.nA,{children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"font-medium",children:e.variantName})})}),(0,r.jsx)(l.nA,{children:e.manufacturer}),(0,r.jsx)(l.nA,{children:(0,r.jsx)(N.E,{variant:"outline",children:e.country})}),(0,r.jsx)(l.nA,{className:"hidden 2xl:table-cell",children:(0,r.jsx)("div",{className:"space-y-1",children:null==(a=e.insuranceCoverages)?void 0:a.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)(N.E,{variant:"ACTIVE"===e.status?"default":"secondary",className:"text-xs",children:e.insuranceName}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.clientContributionPercentage,"% client contribution"]})]},e.id))})}),(0,r.jsx)(l.nA,{children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)(l.nA,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(S.Bc,{children:(0,r.jsxs)(S.m_,{children:[(0,r.jsx)(S.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eq(e),children:(0,r.jsx)(j.A,{className:"h-4 w-4"})})}),(0,r.jsx)(S.ZI,{children:(0,r.jsxs)("p",{children:["Edit ",e.brandName]})})]})}),(0,r.jsx)(S.Bc,{children:(0,r.jsxs)(S.m_,{children:[(0,r.jsx)(S.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eF(e.id),disabled:T,children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})}),(0,r.jsx)(S.ZI,{children:(0,r.jsxs)("p",{children:["Delete ",e.brandName]})})]})})]})})]},e.id)})})]})})]}),(0,r.jsx)(t.lG,{open:eo,onOpenChange:eh,children:(0,r.jsx)(t.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=G.filter(e=>eu.genericIds.includes(e.id)),n=a.map(e=>e.name).join(" + ");L({...eu,generics:a,genericName:n,insuranceCoverages:[]},{onSuccess:e=>{A.o.success("Medicine variant created successfully"),eh(!1),em({name:"",tradeName:"",form:"",route:"",strength:"",concentration:"",packaging:"",notes:"",extraInfo:null,genericIds:[]}),eI(a=>({...a,variantId:e.id}))},onError:e=>{A.o.error(e.message||"An error occurred while creating variant")}})},children:[(0,r.jsxs)(t.c7,{children:[(0,r.jsx)(t.L3,{children:"Add New Medicine Variant"}),(0,r.jsx)(t.rr,{children:"Create a new medicine variant to link to this brand."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"name",children:"Variant Name"}),(0,r.jsx)(c.p,{id:"name",value:eu.name,onChange:e=>em({...eu,name:e.target.value}),placeholder:"e.g., Dexamethasone Sodium Phosphate",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"tradeName",children:"Trade Name (Optional)"}),(0,r.jsx)(c.p,{id:"tradeName",value:eu.tradeName,onChange:e=>em({...eu,tradeName:e.target.value}),placeholder:"e.g., Decadron Injectable"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"form",children:"Form"}),(0,r.jsxs)(d.l6,{value:eu.form,onValueChange:e=>em({...eu,form:e}),children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{placeholder:"Select form"})}),(0,r.jsx)(d.gC,{children:B.map(e=>(0,r.jsx)(d.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"route",children:"Route"}),(0,r.jsxs)(d.l6,{value:eu.route,onValueChange:e=>em({...eu,route:e}),children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{placeholder:"Select route"})}),(0,r.jsx)(d.gC,{children:E.map(e=>(0,r.jsx)(d.eb,{value:e,children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"strength",children:"Strength"}),(0,r.jsx)(c.p,{id:"strength",value:eu.strength,onChange:e=>em({...eu,strength:e.target.value}),placeholder:"e.g., 4mg/ml",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"concentration",children:"Concentration (Optional)"}),(0,r.jsx)(c.p,{id:"concentration",value:eu.concentration,onChange:e=>em({...eu,concentration:e.target.value}),placeholder:"e.g., 10mg/ml"})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"packaging",children:"Packaging"}),(0,r.jsx)(c.p,{id:"packaging",value:eu.packaging,onChange:e=>em({...eu,packaging:e.target.value}),placeholder:"e.g., Vial 1ml",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"notes",children:"Notes"}),(0,r.jsx)(q.T,{id:"notes",value:eu.notes,onChange:e=>em({...eu,notes:e.target.value}),placeholder:"Additional notes about administration or usage"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{children:"Linked Generics"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(d.l6,{value:"",onValueChange:e=>{e&&!eu.genericIds.includes(e)&&eB(e)},children:[(0,r.jsx)(d.bq,{className:"flex-1",children:(0,r.jsx)(d.yv,{placeholder:"Search and add generics..."})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(c.p,{placeholder:"Search generics...",className:"mb-2",value:ex,onChange:e=>eg(e.target.value)})}),eE.map(e=>(0,r.jsx)(d.eb,{value:e.id,children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e.className})]})},e.id)),0===eE.length&&(0,r.jsx)("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"No generics found"})]})]}),(0,r.jsx)(i.$,{type:"button",variant:"outline",size:"icon",onClick:()=>ev(!0),children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Selected Generics:"}),0===eu.genericIds.length?(0,r.jsx)("div",{className:"text-sm text-muted-foreground italic",children:"No generics selected"}):(0,r.jsx)("div",{className:"space-y-2",children:eu.genericIds.map(e=>{let a=G.find(a=>a.id===e);return a?(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md bg-muted/50",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:a.name}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:a.className})]})}),(0,r.jsx)(i.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>eB(a.id),className:"h-6 w-6 p-0",children:(0,r.jsx)(u.A,{className:"h-3 w-3"})})]},a.id):null})})]})]})]}),(0,r.jsxs)(t.Es,{children:[(0,r.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>eh(!1),children:"Cancel"}),(0,r.jsxs)(i.$,{type:"submit",disabled:z||0===eu.genericIds.length,children:[z&&(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Variant"]})]})]})})}),(0,r.jsx)(t.lG,{open:ej,onOpenChange:ev,children:(0,r.jsx)(t.Cf,{className:"sm:max-w-[600px]",children:(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!ep.classId)return void A.o.error("Please select a therapeutic class.");let a=_.find(e=>e.id===ep.classId);U({...ep,className:(null==a?void 0:a.name)||"",isParent:!0,insuranceCoverages:[]},{onSuccess:e=>{A.o.success("Generic created successfully"),ev(!1),eN({name:"",chemicalName:"",description:"",classId:""}),eB(e.id)},onError:e=>{A.o.error(e.message||"Failed to create generic")}})},children:[(0,r.jsxs)(t.c7,{children:[(0,r.jsx)(t.L3,{children:"Add New Generic Medicine"}),(0,r.jsx)(t.rr,{children:"Create a new generic medicine to link to this variant."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"new-generic-name",children:"Name *"}),(0,r.jsx)(c.p,{id:"new-generic-name",value:ep.name,onChange:e=>eN({...ep,name:e.target.value}),placeholder:"e.g., Metformin",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"new-generic-chemicalName",children:"Chemical Name *"}),(0,r.jsx)(c.p,{id:"new-generic-chemicalName",value:ep.chemicalName,onChange:e=>eN({...ep,chemicalName:e.target.value}),placeholder:"e.g., Metformin hydrochloride",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"new-generic-classId",children:"Therapeutic Class *"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(d.l6,{value:ep.classId,onValueChange:e=>eN({...ep,classId:e}),children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{placeholder:"Select a therapeutic class"})}),(0,r.jsx)(d.gC,{children:_.map(e=>(0,r.jsx)(d.eb,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(i.$,{type:"button",variant:"outline",size:"icon",onClick:()=>eb(!0),children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"new-generic-description",children:"Description *"}),(0,r.jsx)(q.T,{id:"new-generic-description",value:ep.description,onChange:e=>eN({...ep,description:e.target.value}),placeholder:"Brief description of the generic medicine",required:!0})]})]}),(0,r.jsxs)(t.Es,{children:[(0,r.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>ev(!1),children:"Cancel"}),(0,r.jsxs)(i.$,{type:"submit",disabled:Z,children:[Z&&(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Generic"]})]})]})})}),(0,r.jsx)(t.lG,{open:ef,onOpenChange:eb,children:(0,r.jsx)(t.Cf,{className:"sm:max-w-[425px]",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R(eC,{onSuccess:e=>{A.o.success("Therapeutic class created successfully"),eb(!1),ey({name:"",description:""}),eN(a=>({...a,classId:e.id}))},onError:e=>{A.o.error(e.message||"Failed to create therapeutic class")}})},children:[(0,r.jsxs)(t.c7,{children:[(0,r.jsx)(t.L3,{children:"Add New Therapeutic Class"}),(0,r.jsx)(t.rr,{children:"Create a new therapeutic class for organizing medicines."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"new-class-name",children:"Name"}),(0,r.jsx)(c.p,{id:"new-class-name",value:eC.name,onChange:e=>ey({...eC,name:e.target.value}),placeholder:"e.g., Antidiabetics",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"new-class-description",children:"Description"}),(0,r.jsx)(q.T,{id:"new-class-description",value:eC.description,onChange:e=>ey({...eC,description:e.target.value}),placeholder:"Brief description of the therapeutic class",required:!0})]})]}),(0,r.jsxs)(t.Es,{children:[(0,r.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>eb(!1),children:"Cancel"}),(0,r.jsxs)(i.$,{type:"submit",disabled:K,children:[K&&(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Class"]})]})]})})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[9414,2261,5716,8377,7026,9297,9037,6338,8534,6565,7519,9309,951,7358],()=>a(52001)),_N_E=e.O()}]);